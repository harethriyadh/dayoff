"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[664],{5534:function(e,t,a){a.r(t);var r=a(4810),n=a(6540);t.default=function(){const{0:e,1:t}=(0,n.useState)(""),{0:a,1:o}=(0,n.useState)(""),{0:l,1:s}=(0,n.useState)(!1),{0:c,1:m}=(0,n.useState)(!1),{0:i,1:d}=(0,n.useState)(""),{0:u,1:p}=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch("https://subend.onrender.com/api/login");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();e.ok&&t.user?window.location.href="/index":d("Please log in.")}catch(e){console.error("Error checking session:",e),d("Failed to check session. Server error: "+e.message),p(!1)}})()}),[]),n.createElement("div",{className:"d-flex flex-column"},n.createElement("div",{className:"page"},n.createElement("div",{className:"container container-tight py-4"},n.createElement("div",{className:"text-center mb-4"},n.createElement(r.N_,{to:"/",className:"navbar-brand navbar-brand-autodark"})),n.createElement("div",{className:"card card-md"},n.createElement("div",{className:"card-body"},n.createElement("h2",{className:"h2 text-center mb-4"},"تسجيل الدخول إلى حسابك"),n.createElement("form",{id:"loginForm",onSubmit:async t=>{if(t.preventDefault(),d(""),p(!0),!e||!a)return d("Please enter both username and password."),void p(!1);try{const t=await fetch("https://subend.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Login failed.  Server error.")}const r=await t.json();r.token?(localStorage.setItem("authToken",r.token),c?(localStorage.setItem("rememberMe","true"),localStorage.setItem("username",e),localStorage.setItem("password",a)):(localStorage.removeItem("rememberMe"),localStorage.removeItem("username"),localStorage.removeItem("password")),window.location.href="./index"):d(r.message||"Login failed. Invalid credentials.")}catch(r){console.error("Login error:",r),d("Error during login: "+r.message)}finally{p(!1)}},autoComplete:"off",noValidate:!0},n.createElement("div",{className:"mb-3"},n.createElement("label",{className:"form-label"},"اسم المستخدم"),n.createElement("input",{type:"text",id:"username",className:"form-control",placeholder:"اسم المستخدم",autoComplete:"off",value:e,onChange:e=>t(e.target.value),required:!0})),n.createElement("div",{className:"mb-2 inputfield"},n.createElement("label",{className:"form-label"},"كلمة المرور",n.createElement("span",{className:"form-label-description"},n.createElement(r.N_,{to:"/forgot-password"},"نسيت كلمة المرور"))),n.createElement("div",{className:"input-group input-group-flat"},n.createElement("input",{type:l?"text":"password",id:"password",className:"form-control password-input",placeholder:"كلمة المرور الخاصة بك",autoComplete:"off",value:a,onChange:e=>o(e.target.value),required:!0}),n.createElement("span",{className:"input-group-text"},n.createElement("a",{href:"javascript:void(0)",className:"link-secondary password-toggle",title:l?"إخفاء كلمة المرور":"إظهار كلمة المرور",onClick:()=>{s(!l)}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-1"},l?n.createElement("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.56"}):n.createElement("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),!l&&n.createElement("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})))))),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"form-check"},n.createElement("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",checked:c,onChange:e=>{m(e.target.checked)}}),n.createElement("span",{className:"form-check-label"},"تذكرني على هذا الجهاز"))),i&&n.createElement("div",{className:"alert alert-danger",role:"alert"},n.createElement("div",{className:"d-flex"},n.createElement("div",null,n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon alert-icon",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"}),n.createElement("path",{d:"M12 8v8"}),n.createElement("path",{d:"M12 16h.01"}))),n.createElement("div",null,n.createElement("h4",{className:"alert-title"},"Error"),n.createElement("div",{className:"alert-text"},i)))),n.createElement("div",{className:"form-footer"},n.createElement("button",{type:"submit",className:"btn btn-primary w-100",disabled:u},u?"جاري التحميل...":"تسجيل الدخول")),n.createElement("div",{className:"text-center text-muted mt-3"},"ليس لديك حساب؟ ",n.createElement(r.N_,{to:"/register"},"تسجيل الدخول"))))))))}}}]);
//# sourceMappingURL=component---src-pages-login-jsx-a90c903e9ac0d7c9635f.js.map