{"version":3,"file":"component---src-pages-login-jsx.js","mappings":"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","sources":["webpack://my-app/./src/pages/login.jsx"],"sourcesContent":["import { Link } from 'gatsby'; // Import the Link component from Gatsby\nimport React, { useState, useEffect } from 'react';\nimport '../styles/css/tabler.min.css'; // Removed - causing errors\nimport '../styles/css/tabler-flags.min.css'; // Removed - causing errors\nimport '../styles/css/tabler-socials.min.css'; // Removed - causing errors\nimport '../styles/css/tabler-payments.min.css'; // Removed - causing errors\nimport '../styles/css/tabler-vendors.min.css'; // Removed - causing errors\nimport '../styles/css/tabler-marketing.min.css'; // Removed - causing errors\nimport '../styles/css/demo.min.css'; // Removed - causing errors\nimport '../styles/rtl.css'; // Removed - causing errors\n\n\nfunction LoginPage() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [rememberMe, setRememberMe] = useState(false);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const response = await fetch('https://subend.onrender.com/api/login');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n\n        if (response.ok && data.user) {\n          window.location.href = \"/index\";\n        } else {\n          setMessage('Please log in.');\n        }\n      } catch (error) {\n        console.error('Error checking session:', error);\n        setMessage('Failed to check session. Server error: ' + error.message); // Include the error message\n        setLoading(false); // Make sure to set loading to false on error\n      }\n    };\n    checkSession();\n  }, []);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    setLoading(true);\n\n    if (!username || !password) {\n      setMessage('Please enter both username and password.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const response = await fetch('https://subend.onrender.com/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Login failed.  Server error.');\n      }\n\n      const data = await response.json();\n\n      if (data.token) {\n        localStorage.setItem('authToken', data.token);\n        if (rememberMe) {\n          localStorage.setItem('rememberMe', 'true');\n          localStorage.setItem('username', username);\n          localStorage.setItem('password', password);\n        } else {\n          localStorage.removeItem('rememberMe');\n          localStorage.removeItem('username');\n          localStorage.removeItem('password');\n        }\n        window.location.href = \"./index\";\n      } else {\n        setMessage(data.message || 'Login failed. Invalid credentials.');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      setMessage('Error during login: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const togglePasswordVisibility = () => {\n    setPasswordVisible(!passwordVisible);\n  };\n\n  const handleRememberMeChange = (e) => {\n    setRememberMe(e.target.checked);\n  };\n\n  return (\n    <div className=\"d-flex flex-column\">\n      <div className=\"page\">\n        <div className=\"container container-tight py-4\">\n          <div className=\"text-center mb-4\">\n            <Link to=\"/\" className=\"navbar-brand navbar-brand-autodark\">\n              {/* Add your logo here if needed */}\n            </Link>\n          </div>\n          <div className=\"card card-md\">\n            <div className=\"card-body\">\n              <h2 className=\"h2 text-center mb-4\">تسجيل الدخول إلى حسابك</h2>\n              <form id=\"loginForm\" onSubmit={handleLogin} autoComplete=\"off\" noValidate>\n                <div className=\"mb-3\">\n                  <label className=\"form-label\">اسم المستخدم</label>\n                  <input\n                    type=\"text\"\n                    id=\"username\"\n                    className=\"form-control\"\n                    placeholder=\"اسم المستخدم\"\n                    autoComplete=\"off\"\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    required\n                  />\n                </div>\n                <div className=\"mb-2 inputfield\">\n                  <label className=\"form-label\">\n                    كلمة المرور\n                    <span className=\"form-label-description\">\n                      <Link to=\"/forgot-password\">نسيت كلمة المرور</Link>\n                    </span>\n                  </label>\n                  <div className=\"input-group input-group-flat\">\n                    <input\n                      type={passwordVisible ? 'text' : 'password'}\n                      id=\"password\"\n                      className=\"form-control password-input\"\n                      placeholder=\"كلمة المرور الخاصة بك\"\n                      autoComplete=\"off\"\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      required\n                    />\n                    <span className=\"input-group-text\">\n                      <a\n                        href=\"javascript:void(0)\" // Or href=\"\"\n                        className=\"link-secondary password-toggle\"\n                        title={passwordVisible ? \"إخفاء كلمة المرور\" : \"إظهار كلمة المرور\"}\n                        onClick={togglePasswordVisibility}\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          width=\"24\"\n                          height=\"24\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          className=\"icon icon-1\"\n                        >\n                          {passwordVisible ? (\n                            <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.56\" />\n                          ) : (\n                            <path d=\"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0\" />\n                          )}\n                          {!passwordVisible && <path d=\"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6\" />}\n                        </svg>\n                      </a>\n                    </span>\n                  </div>\n                </div>\n                <div className=\"mb-2\">\n                  <label className=\"form-check\">\n                    <input\n                      type=\"checkbox\"\n                      className=\"form-check-input\"\n                      id=\"rememberMe\"\n                      checked={rememberMe}\n                      onChange={handleRememberMeChange}\n                    />\n                    <span className=\"form-check-label\">تذكرني على هذا الجهاز</span>\n                  </label>\n                </div>\n                {message && (\n                  <div className=\"alert alert-danger\" role=\"alert\">\n                    <div className=\"d-flex\">\n                      <div>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon alert-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0\"></path><path d=\"M12 8v8\"></path><path d=\"M12 16h.01\"></path></svg>\n                      </div>\n                      <div>\n                        <h4 className=\"alert-title\">Error</h4>\n                        <div className=\"alert-text\">\n                          {message}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n                <div className=\"form-footer\">\n                  <button type=\"submit\" className=\"btn btn-primary w-100\" disabled={loading}>\n                    {loading ? 'جاري التحميل...' : 'تسجيل الدخول'}\n                  </button>\n                </div>\n                <div className=\"text-center text-muted mt-3\">\n                  ليس لديك حساب؟ <Link to=\"/register\">تسجيل الدخول</Link>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;\n"],"names":["Link","React","useState","useEffect","LoginPage","username","setUsername","password","setPassword","passwordVisible","setPasswordVisible","rememberMe","setRememberMe","message","setMessage","loading","setLoading","checkSession","response","fetch","ok","Error","status","data","json","user","window","location","href","error","console","handleLogin","e","preventDefault","method","headers","body","JSON","stringify","errorData","token","localStorage","setItem","removeItem","togglePasswordVisibility","handleRememberMeChange","target","checked","createElement","className","to","id","onSubmit","autoComplete","noValidate","type","placeholder","value","onChange","required","title","onClick","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","role","disabled"],"sourceRoot":""}