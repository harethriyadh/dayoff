"use strict";
exports.id = 664;
exports.ids = [664];
exports.modules = {

/***/ 5534:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var gatsby__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(123);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2017);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* provided dependency */ var fetch = __webpack_require__(3492);
// Import the Link component from Gatsby
// Removed - causing errors
// Removed - causing errors
// Removed - causing errors
// Removed - causing errors
// Removed - causing errors
// Removed - causing errors
// Removed - causing errors
// Removed - causing errors
function LoginPage(){const{0:username,1:setUsername}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');const{0:password,1:setPassword}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');const{0:passwordVisible,1:setPasswordVisible}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);const{0:rememberMe,1:setRememberMe}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);const{0:message,1:setMessage}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');const{0:loading,1:setLoading}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{const checkSession=async()=>{try{const response=await fetch('https://subend.onrender.com/api/login');if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();if(response.ok&&data.user){window.location.href="/index";}else{setMessage('Please log in.');}}catch(error){console.error('Error checking session:',error);setMessage('Failed to check session. Server error: '+error.message);// Include the error message
setLoading(false);// Make sure to set loading to false on error
}};checkSession();},[]);const handleLogin=async e=>{e.preventDefault();setMessage('');setLoading(true);if(!username||!password){setMessage('Please enter both username and password.');setLoading(false);return;}try{const response=await fetch('https://subend.onrender.com/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.message||'Login failed.  Server error.');}const data=await response.json();if(data.token){localStorage.setItem('authToken',data.token);if(rememberMe){localStorage.setItem('rememberMe','true');localStorage.setItem('username',username);localStorage.setItem('password',password);}else{localStorage.removeItem('rememberMe');localStorage.removeItem('username');localStorage.removeItem('password');}window.location.href="./index";}else{setMessage(data.message||'Login failed. Invalid credentials.');}}catch(error){console.error('Login error:',error);setMessage('Error during login: '+error.message);}finally{setLoading(false);}};const togglePasswordVisibility=()=>{setPasswordVisible(!passwordVisible);};const handleRememberMeChange=e=>{setRememberMe(e.target.checked);};return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"d-flex flex-column"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"page"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"container container-tight py-4"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"text-center mb-4"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(gatsby__WEBPACK_IMPORTED_MODULE_0__.Link,{to:"/",className:"navbar-brand navbar-brand-autodark"})),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"card card-md"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"card-body"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("h2",{className:"h2 text-center mb-4"},"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0625\u0644\u0649 \u062D\u0633\u0627\u0628\u0643"),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("form",{id:"loginForm",onSubmit:handleLogin,autoComplete:"off",noValidate:true},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"mb-3"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("label",{className:"form-label"},"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("input",{type:"text",id:"username",className:"form-control",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",autoComplete:"off",value:username,onChange:e=>setUsername(e.target.value),required:true})),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"mb-2 inputfield"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("label",{className:"form-label"},"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("span",{className:"form-label-description"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(gatsby__WEBPACK_IMPORTED_MODULE_0__.Link,{to:"/forgot-password"},"\u0646\u0633\u064A\u062A \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"))),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"input-group input-group-flat"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("input",{type:passwordVisible?'text':'password',id:"password",className:"form-control password-input",placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643",autoComplete:"off",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("span",{className:"input-group-text"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("a",{href:"javascript:void(0)"// Or href=""
,className:"link-secondary password-toggle",title:passwordVisible?"إخفاء كلمة المرور":"إظهار كلمة المرور",onClick:togglePasswordVisibility},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-1"},passwordVisible?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.56"}):/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),!passwordVisible&&/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})))))),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"mb-2"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("label",{className:"form-check"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",checked:rememberMe,onChange:handleRememberMeChange}),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("span",{className:"form-check-label"},"\u062A\u0630\u0643\u0631\u0646\u064A \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u062C\u0647\u0627\u0632"))),message&&/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"alert alert-danger",role:"alert"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"d-flex"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon alert-icon",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"}),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("path",{d:"M12 8v8"}),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("path",{d:"M12 16h.01"}))),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("h4",{className:"alert-title"},"Error"),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"alert-text"},message)))),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"form-footer"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("button",{type:"submit",className:"btn btn-primary w-100",disabled:loading},loading?'جاري التحميل...':'تسجيل الدخول')),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"text-center text-muted mt-3"},"\u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u062D\u0633\u0627\u0628\u061F ",/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(gatsby__WEBPACK_IMPORTED_MODULE_0__.Link,{to:"/register"},"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"))))))));}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LoginPage);

/***/ })

};
;
//# sourceMappingURL=component---src-pages-login-jsx.js.map